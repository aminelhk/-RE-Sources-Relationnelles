{"ast":null,"code":"import { useEffect } from \"react\";\n/**\n * Equivalent of https://docs.evt.land/api/react-hooks\n */\nexport function useObservable(effect, deps) {\n  useEffect(() => {\n    const subscriptions = [];\n    effect({\n      \"registerSubscription\": subscription => subscriptions.push(subscription)\n    });\n    return () => {\n      subscriptions.forEach(subscription => subscription.unsubscribe());\n      subscriptions.length = 0;\n    };\n  }, deps);\n}","map":{"version":3,"names":["useEffect","useObservable","effect","deps","subscriptions","subscription","push","forEach","unsubscribe","length"],"sources":["C:\\Users\\alban\\node_modules\\@codegouvfr\\react-dsfr\\src\\tools\\StatefulObservable\\hooks\\useObservable.ts"],"sourcesContent":["import { useEffect } from \"react\";\nimport type { Subscription } from \"../StatefulObservable\";\n\n/**\n * Equivalent of https://docs.evt.land/api/react-hooks\n */\nexport function useObservable(\n    effect: (params: { registerSubscription: (subscription: Subscription) => void }) => void,\n    deps: React.DependencyList\n): void {\n    useEffect(() => {\n        const subscriptions: Subscription[] = [];\n\n        effect({\n            \"registerSubscription\": subscription => subscriptions.push(subscription)\n        });\n\n        return () => {\n            subscriptions.forEach(subscription => subscription.unsubscribe());\n            subscriptions.length = 0;\n        };\n    }, deps);\n}\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,OAAO;AAGjC;;;AAGA,OAAM,SAAUC,aAAaA,CACzBC,MAAwF,EACxFC,IAA0B;EAE1BH,SAAS,CAAC,MAAK;IACX,MAAMI,aAAa,GAAmB,EAAE;IAExCF,MAAM,CAAC;MACH,sBAAsB,EAAEG,YAAY,IAAID,aAAa,CAACE,IAAI,CAACD,YAAY;KAC1E,CAAC;IAEF,OAAO,MAAK;MACRD,aAAa,CAACG,OAAO,CAACF,YAAY,IAAIA,YAAY,CAACG,WAAW,EAAE,CAAC;MACjEJ,aAAa,CAACK,MAAM,GAAG,CAAC;IAC5B,CAAC;EACL,CAAC,EAAEN,IAAI,CAAC;AACZ"},"metadata":{},"sourceType":"module","externalDependencies":[]}