{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React from \"react\";\nimport { fr } from \"./fr\";\nimport { cx } from \"./tools/cx\";\nimport { assert } from \"tsafe/assert\";\nimport { is } from \"tsafe/is\";\nlet Link = props => {\n  const _a = props,\n    {\n      href\n    } = _a,\n    rest = __rest(_a, [\"href\"]);\n  button: {\n    if (href !== \"#\" || !(\"onClick\" in rest)) {\n      break button;\n    }\n    assert(is(rest));\n    return React.createElement(\"button\", Object.assign({}, rest, {\n      className: cx(fr.cx(\"fr-link\"), rest.className)\n    }));\n  }\n  return React.createElement(\"a\", Object.assign({\n    href: href\n  }, rest));\n};\nexport function setLink(params) {\n  Link = props => {\n    var _a;\n    {\n      const _b = props,\n        {\n          to,\n          href\n        } = _b,\n        rest = __rest(_b, [\"to\", \"href\"]);\n      const target = (_a = typeof to === \"string\" ? to : undefined) !== null && _a !== void 0 ? _a : typeof href === \"string\" ? href : undefined;\n      button: {\n        if (target !== \"#\" || !(\"onClick\" in rest)) {\n          break button;\n        }\n        assert(is(rest));\n        return React.createElement(\"button\", Object.assign({}, rest, {\n          className: cx(fr.cx(\"fr-link\"), rest.className)\n        }));\n      }\n      mailto: {\n        if (target === undefined || !target.startsWith(\"mailto:\")) {\n          break mailto;\n        }\n        return React.createElement(\"a\", Object.assign({\n          href: target\n        }, rest));\n      }\n      external_links: {\n        if (target === undefined || !target.startsWith(\"//\") && !/^https?:\\/\\//.test(target)) {\n          break external_links;\n        }\n        return React.createElement(\"a\", Object.assign({\n          href: target,\n          target: \"_blank\",\n          rel: \"noreferrer\"\n        }, rest));\n      }\n      anchor: {\n        if (target === undefined || !target.startsWith(\"#\")) {\n          break anchor;\n        }\n        return React.createElement(\"a\", Object.assign({\n          href: target\n        }, rest));\n      }\n    }\n    return React.createElement(params.Link, Object.assign({}, props));\n  };\n}\nexport function getLink() {\n  return {\n    Link\n  };\n}","map":{"version":3,"names":["React","fr","cx","assert","is","Link","props","_a","href","rest","__rest","button","createElement","Object","assign","className","setLink","params","_b","to","target","undefined","mailto","startsWith","external_links","test","rel","anchor","getLink"],"sources":["C:\\Users\\alban\\node_modules\\@codegouvfr\\react-dsfr\\src\\link.tsx"],"sourcesContent":["import React, { type ReactNode, type DetailedHTMLProps, type AnchorHTMLAttributes } from \"react\";\nimport { fr } from \"./fr\";\nimport { cx } from \"./tools/cx\";\nimport { assert } from \"tsafe/assert\";\nimport { is } from \"tsafe/is\";\nimport type { UnpackProps } from \"./tools/UnpackProps\";\n\ntype HTMLAnchorProps = DetailedHTMLProps<\n    AnchorHTMLAttributes<HTMLAnchorElement>,\n    HTMLAnchorElement\n>;\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface RegisterLink {}\n\nexport type RegisteredLinkProps = RegisterLink extends { Link: infer Link }\n    ? Omit<UnpackProps<Link>, \"children\">\n    : Omit<HTMLAnchorProps, \"children\">;\n\nlet Link: React.ComponentType<RegisteredLinkProps & { children: ReactNode }> = props => {\n    const { href, ...rest } = props as { to?: string; href?: string };\n\n    button: {\n        if (href !== \"#\" || !(\"onClick\" in rest)) {\n            break button;\n        }\n\n        assert(\n            is<\n                React.DetailedHTMLProps<\n                    React.ButtonHTMLAttributes<HTMLButtonElement>,\n                    HTMLButtonElement\n                >\n            >(rest)\n        );\n\n        return <button {...rest} className={cx(fr.cx(\"fr-link\"), rest.className)} />;\n    }\n\n    return <a href={href} {...rest} />;\n};\n\nexport function setLink(params: { Link: typeof Link }): void {\n    Link = props => {\n        {\n            const { to, href, ...rest } = props as { to?: string; href?: string };\n\n            const target =\n                (typeof to === \"string\" ? to : undefined) ??\n                (typeof href === \"string\" ? href : undefined);\n\n            button: {\n                if (target !== \"#\" || !(\"onClick\" in rest)) {\n                    break button;\n                }\n\n                assert(\n                    is<\n                        React.DetailedHTMLProps<\n                            React.ButtonHTMLAttributes<HTMLButtonElement>,\n                            HTMLButtonElement\n                        >\n                    >(rest)\n                );\n\n                return <button {...rest} className={cx(fr.cx(\"fr-link\"), rest.className)} />;\n            }\n\n            mailto: {\n                if (target === undefined || !target.startsWith(\"mailto:\")) {\n                    break mailto;\n                }\n\n                return <a href={target} {...rest} />;\n            }\n\n            external_links: {\n                if (\n                    target === undefined ||\n                    (!target.startsWith(\"//\") && !/^https?:\\/\\//.test(target))\n                ) {\n                    break external_links;\n                }\n\n                return <a href={target} target=\"_blank\" rel=\"noreferrer\" {...rest} />;\n            }\n\n            anchor: {\n                if (target === undefined || !target.startsWith(\"#\")) {\n                    break anchor;\n                }\n\n                return <a href={target} {...rest} />;\n            }\n        }\n\n        return <params.Link {...props} />;\n    };\n}\n\nexport function getLink() {\n    return { Link };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}